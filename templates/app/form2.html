{% extends 'app/base.html' %}
{% block content%}
<!--<script src="/path/to/jquery.js" type="text/javascript"></script>-->

<div class="container" style="margin-top: 10px;">
    <h1>{{title}}</h1>
    <form method="post" action="form2" style="margin-bottom: 3rem;">
        {% csrf_token %}
        <div class="form-row" style="margin-bottom: 1rem; margin-top: 2rem">
        {% for field in form %}
            {% if forloop.counter <= 6 %}
                <div class="form-group col-md-2">
                {{ field.label_tag}}{{field}}
                </div>
            {%elif forloop.counter <= 14%}
                <div class="form-group col-md-3">
                {{ field.label_tag}}{{field}}
                </div>
            {%endif%}
        {% endfor %}
        </div>
            {% include "app/choose_sheeps.html" %}
        <div class="form-row">
            <div class="form-group col-md-12">
            {{ form.label_tag.placement }}{{ form.placement }}
            </div>
            <div class="form-group col-md-12">
            {{ form.label_tag.rout }}{{ form.rout }}
            </div>
            <div class="form-group col-md-12">
            {{ form.label_tag.hostorganization }}{{ form.hostorganization }}
            </div>
        </div>


        <div class="form-row align-items-center">
            <div class="col-auto">
                <button type="submit" class="btn btn-outline-secondary btn-sm">Сохранить</button>
            </div>
        </div>

    <div id="members" style="margin-top: 1rem;">
    </div>
    <input type="hidden" name="NUM" value="1" id="NUM">
    <button type="button" id="add_member" class="btn btn-outline-secondary btn-sm input-xs" onclick="add_m()">+</button>
    </form>
</div>


<script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<script>
NUM = 0
var m = document.getElementById('members');
function add_m()
{
    console.log('add_member')
    NUM++;
    $.ajax({
        url: '/add_member',
        type: 'post',
        data: {'NUM':NUM,'csrfmiddlewaretoken': '{{csrf_token}}'},
        success: function(resp)
        {
            $("#members").append(resp);
            $('#NUM').val(NUM)
        },
    });
}

function delete_m(NUM)
{
    console.log('del')
    $("#member_id_"+NUM).remove()
    $('#NUM').val(NUM)
}
</script>


{% endblock %}

